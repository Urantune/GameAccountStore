<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Nạp tiền</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
</head>
<body class="bg-light">

<div class="container py-5" style="max-width:720px;">
    <div class="card shadow-sm">
        <div class="card-body p-4">

            <h4 class="fw-bold mb-3">nạp tiền vào ví</h4>

            <div class="mb-3">
                <span class="text-muted">số dư hiện tại: </span>
                <b th:text="${#numbers.formatDecimal(balance,0,'COMMA',0,'POINT')} + ' đ'">0 đ</b>
            </div>

            <form th:action="@{/home/wallet/topup}" method="post" class="row g-2">
                <div class="col-12">
                    <label class="form-label">số tiền muốn nạp</label>
                    <input type="number" name="amount" class="form-control"
                           min="1000" step="1000"
                           placeholder="ví dụ: 100000" required>
                </div>

                <div class="col-12 d-flex gap-2 mt-2">
                    <button class="btn btn-primary">xác nhận nạp</button>
                    <a class="btn btn-outline-secondary" th:href="@{/home/wallet}">quay lại ví</a>
                </div>
            </form>

            <div class="mt-4" th:if="${idpayment != null}">
                <hr>

                <h5 class="fw-bold mb-2">QR thanh toán</h5>

                <div class="text-muted mb-2" style="font-size:13px;">
                    Mã giao dịch:
                    <b th:text="${idpayment}">TOPUP-XXX</b>
                    |
                    Số tiền:
                    <b th:text="${#numbers.formatDecimal(amount,0,'COMMA',0,'POINT')} + ' đ'">0 đ</b>
                </div>

                <div class="d-flex justify-content-center">
                    <img class="border rounded p-2 bg-white"
                         th:src="@{/home/wallet/qr.png(idpayment=${idpayment})}"
                         alt="QR Code">
                </div>

                <form th:action="@{/home/wallet/topup/confirm}" method="post"
                      class="mt-3 d-flex justify-content-center gap-2">
                    <input type="hidden" name="idpayment" th:value="${idpayment}">
                    <input type="hidden" name="amount" th:value="${amount}">
                    <button class="btn btn-success px-4">xác nhận đã thanh toán</button>
                </form>
            </div>

            <div class="mt-3 text-muted" style="font-size:13px;">
                nạp tiền demo nội bộ, không phải thanh toán thật
            </div>

        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
