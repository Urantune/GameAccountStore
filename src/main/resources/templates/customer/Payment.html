<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Thanh Toán Đơn Hàng</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
</head>
<body>

<div class="payment-box container my-5">
    <div class="mx-auto" style="max-width: 450px;">
        <div class="p-4 bg-white shadow-lg rounded-4">

            <h2 class="mb-4 text-center fw-bold">Thanh toán đơn hàng</h2>

            <!-- Info game -->
            <div class="product-info text-center mb-4">
                <h4 class="mb-2" th:text="${'Game: ' + games.game.gameName}"></h4>

                <img th:src="@{'/images/' + ${games.imageMain}}"
                     class="img-fluid rounded shadow-sm mb-3"
                     style="max-height: 220px; object-fit: cover;" />

                <p class="fs-5">
                    <strong class="text-danger" id="price"
                            th:text="${'Price: '+ games.price}"></strong>
                </p>
            </div>

            <!-- Form -->
            <form action="/order/confirm" method="post">

                <!-- Nút mở modal -->
                <div class="mb-3">
                    <label class="form-label fw-semibold">Gói thanh toán</label>
                    <div class="input-group">
                        <input type="text" id="selectedPackage" class="form-control" placeholder="Chưa chọn"
                               readonly>

                        <button type="button" class="btn btn-primary"
                                data-bs-toggle="modal" data-bs-target="#editCountryModal">
                            Chọn gói
                        </button>
                    </div>

                    <!-- Hidden input để gửi lên server -->
                    <input type="hidden" name="package" id="packageValue">
                </div>

                <!-- Modal chọn gói -->
                <div class="modal fade" id="editCountryModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content rounded-3 shadow-lg">
                            <div class="modal-header bg-primary text-white">
                                <h5 class="modal-title">Chọn gói mua</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <label class="form-label fw-bold">Gói thanh toán</label>
                                <select id="new" class="form-select">
                                    <option selected disabled>-- Chọn gói --</option>
                                    <option>1 Tháng</option>
                                    <option>2 Tháng</option>
                                    <option>3 Tháng</option>
                                    <option>Vĩnh Viễn</option>
                                </select>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary w-100" id="saveCountryBtn"
                                        data-bs-dismiss="modal">
                                    Chọn
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <h4 class="mb-3 fw-bold text-center">Thông Tin Thanh Toán</h4>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Phương thức thanh toán</label>
                    <select class="form-select" name="paymentMethod">
                        <option value="MOMO">Ví GamePay</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Ghi chú</label>
                    <textarea class="form-control" rows="3" name="note"
                              placeholder="Nhập ghi chú nếu có..."></textarea>
                </div>

                <button type="submit" class="btn btn-danger w-100 py-2 fw-bold">
                    Xác Nhận Thanh Toán
                </button>

            </form>

        </div>
    </div>
</div>

<style>
    .payment-box {
        padding-bottom: 50px;
    }

    .product-info img {
        border-radius: 12px;
    }

</style>

<script>
    document.getElementById("saveCountryBtn").addEventListener("click", function () {
        const value = document.getElementById("new").value;

        // Hiển thị gói đã chọn lên form
        document.getElementById("selectedPackage").value = value;

        // Gửi vào hidden input để server nhận được
        document.getElementById("packageValue").value = value;
    });
</script>
<script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js}"></script>

</body>
</html>
