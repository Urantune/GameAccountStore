<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Create Game Account</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root { --orange: #ff7a2f; }
        body { background:#f5f5f5; font-family:Roboto, sans-serif; }
        .bar-top { height:70px; background:var(--orange); display:flex; align-items:center; padding-left:30px; color:white; }
        .content { padding:30px 40px; }
        .card-box { background:white; border-radius:12px; padding:25px; box-shadow:0 3px 10px rgba(0,0,0,.1); }
    </style>
</head>

<body>

<div class="bar-top">
    <h4>Create Game Account</h4>
</div>

<div class="content container-fluid">

    <form th:action="@{/adminHome/saveNewGameAccount}" method="post" enctype="multipart/form-data">

        <div class="card-box">

            <div class="row g-3">

                <!-- GAME -->
                <div class="col-md-6">
                    <label>Game</label>
                    <select id="gameSelect" name="gameId" class="form-select" required>
                        <option value="">-- Select Game --</option>
                        <option th:each="g : ${games}"
                                th:value="${g.gameId}"
                                th:text="${g.gameName}">
                        </option>
                    </select>
                </div>

                <!-- GAME ACCOUNT -->
                <div class="col-md-6">
                    <label>Account Username</label>
                    <input type="text" name="gameAccount" class="form-control" required>
                </div>

                <!-- PASSWORD -->
                <div class="col-md-6">
                    <label>Password</label>
                    <input type="text" name="gamePassword" class="form-control" required>
                </div>

                <!-- PRICE -->
                <div class="col-md-6">
                    <label>Price</label>
                    <input type="number" name="price" class="form-control" required>
                </div>

                <!-- CLASSIFY -->
                <div class="col-md-6">
                    <label>Classify</label>
                    <select name="classify" class="form-select">
                        <option th:each="c : ${classifyList}" th:text="${c}"></option>
                    </select>
                </div>

                <!-- STATUS -->
                <div class="col-md-6">
                    <label>Status</label>
                    <select name="status" class="form-select">
                        <option>ACTIVE</option>
                        <option>IN USE</option>
                        <option>DISABLED</option>
                    </select>
                </div>


                <!-- TYPE -->
                <div class="col-md-6">
                    <label>Type</label>
                    <select name="typeId" class="form-select">
                        <option th:each="t : ${types}"
                                th:value="${t.typeId}"
                                th:text="${t.getTypeName()}">
                        </option>
                    </select>
                </div>


                <!-- RANK -->
                <div class="col-md-6">
                    <label>Rank</label>
                    <select id="rankSelect" name="rank" class="form-select" required>
                        <option value="">-- Select Rank --</option>
                    </select>
                </div>

                <!-- SKIN -->
                <div class="col-md-4">
                    <label>Skins</label>
                    <input type="number" name="skin" class="form-control" required>
                </div>

                <!-- LEVEL -->
                <div class="col-md-4">
                    <label>Level</label>
                    <input type="number" name="lovel" class="form-control" required>
                </div>

                <!-- VIP -->
                <div class="col-md-4">
                    <label>VIP</label>
                    <input type="number" name="vip" class="form-control" required>
                </div>

                <!-- DESCRIPTION -->
                <div class="col-md-12">
                    <label>Description</label>
                    <textarea name="description" class="form-control" rows="3"></textarea>
                </div>

                <!-- IMAGE -->
                <div class="col-md-12">
                    <label>Main Image</label>
                    <input type="file" name="imageFile" class="form-control" required>
                </div>

                <!-- SUBMIT -->
                <div class="col-md-12 text-end mt-3">
                    <button class="btn btn-primary">Create</button>
                    <a th:href="@{/adminHome/gameSelect}" class="btn btn-secondary">Cancel</a>
                </div>

            </div>

        </div>

    </form>

</div>

<script th:inline="javascript">
    const rankAOV = /*[[${rankAOV}]]*/ [];
    const rankFF  = /*[[${rankFF}]]*/ [];

    const gameSelect = document.getElementById("gameSelect");
    const rankSelect = document.getElementById("rankSelect");

    function resetRank() {
        rankSelect.innerHTML = '<option value="">-- Select Rank --</option>';
    }

    gameSelect.addEventListener("change", function() {
        const gameName = this.selectedOptions[0].textContent.trim().toUpperCase();
        resetRank();

        let ranks = [];
        if (gameName === "AOV") ranks = rankAOV;
        else if (gameName === "FF" || gameName === "FREE FIRE") ranks = rankFF;

        ranks.forEach(r => {
            const op = document.createElement("option");
            op.value = r;
            op.textContent = r;
            rankSelect.appendChild(op);
        });
    });

    resetRank();
</script>


</body>
</html>
